<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    * {margin:0; padding:0; box-sizing:border-box;}
    body {
      font-family: "Tajawal", sans-serif;
      background: #F7F9FD;
      color:#1A3A7A;
      padding-bottom:50px;
    }
    header {
      background: #0A1D41;
      color:#FFFFFF;
      letter-spacing: 0.5px;
      padding:20px 30px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      box-shadow:0 4px 18px rgba(0,0,0,0.15);
    }
    .header-title {font-size:20px; font-weight:700;}
    .header-actions {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    .nav-link {
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      padding: 9px 18px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.12);
      color: #fff;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-decoration: none;
      backdrop-filter: blur(8px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    .nav-link:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      border-color: rgba(255, 255, 255, 0.4);
    }

    .mobile-header {
      display: none;
      background: #0A1D41;
      color: #ffffff;
      padding: 14px 20px;
      font-size: 18px;
      font-weight: 700;
      align-items: center;
      justify-content: space-between;
    }

    .mobile-menu-btn {
      font-size: 26px;
      cursor: pointer;
    }

    .mobile-menu {
      display: none;
      position: fixed;
      inset-inline-start: 0;
      top: 0;
      height: 100vh;
      width: 260px;
      background: #0A1D41;
      padding: 20px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
      z-index: 9999;
      overflow-y: auto;
    }

    .mobile-menu a {
      display: block;
      color: #ffffff;
      padding: 14px 0;
      font-size: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      text-decoration: none;
    }

    .mobile-menu-close {
      color: #ffffff;
      font-size: 26px;
      text-align: end;
      cursor: pointer;
      margin-bottom: 20px;
    }

    @media (max-width: 600px) {
      header {
        flex-direction: column;
        gap: 12px;
        text-align: center;
      }

      .header-actions {
        width: 100%;
        justify-content: center;
        flex-wrap: wrap;
      }
    }

    @media (max-width: 768px) {
      header,
      .top-buttons {
        display: none !important;
      }

      .mobile-header {
        display: flex !important;
      }
    }
    .container {max-width:1400px; margin:40px auto; padding:0 20px;}

    /* Cards */
    .card {
      background:#fff;
      border-radius:20px;
      padding:24px;
      border:1px solid rgba(10,29,65,0.08);
      box-shadow:0 8px 24px rgba(10,29,65,0.08);
      margin-bottom:30px;
      width: 100%;
    }
    .incoming-card {border-top:5px solid #0A1D41;}
    .outgoing-card {border-top:5px solid #A8AD63;}
    .card-title {
      font-size:20px;
      font-weight:700;
      margin-bottom:20px;
      color:#A8AD63;
    }

    /* Request Cards */
    .request-card {
      background:linear-gradient(180deg, #ffffff, #f7f9fc);
      padding:20px;
      border-radius:18px;
      border:1px solid rgba(195, 199, 115, 0.4);
      box-shadow:0 6px 20px rgba(10, 29, 65, 0.08);
      margin-bottom:16px;
      transition:.25s;
    }
    .request-card:hover {
      transform:translateY(-2px);
      box-shadow:0 12px 28px rgba(10,29,65,0.12);
      border-color:#8A8F40;
    }

    .request-header {
      display:flex;
      justify-content:space-between;
      align-items:start;
      margin-bottom:12px;
    }

    .request-title {
      font-size:17px;
      font-weight:700;
      margin-bottom:4px;
      color:#0A1D41;
    }

    .request-meta {
      font-size:13px;
      color:#15294E;
    }

    .severity-badge {
      padding:6px 12px;
      border-radius:8px;
      font-size:12px;
      font-weight:600;
    }

    .severity-high {
      background:rgba(231,76,60,0.15);
      color:#e74c3c;
    }

    .severity-medium {
      background:rgba(241,196,15,0.15);
      color:#f39c12;
    }

    .severity-low {
      background:rgba(46,204,113,0.15);
      color:#27ae60;
    }

    .ai-recommendation {
      background:linear-gradient(180deg,#ffffff,#f7f9fc);
      padding:12px;
      border-radius:12px;
      margin-bottom:12px;
      border:1px solid rgba(195, 199, 115, 0.4);
    }

    .ai-recommendation-title {
      font-size:13px;
      font-weight:600;
      color:#1A3A7A;
      margin-bottom:6px;
    }

    .ai-recommendation-text {
      font-size:12px;
      color:#1A3A7A;
      line-height:1.6;
    }

    .request-actions {
      display:flex;
      gap:8px;
    }

    .btn-action {
      flex:1;
      padding:10px 14px;
      border:none;
      border-radius:12px;
      font-size:13px;
      font-weight:600;
      cursor:pointer;
      transition:.2s;
    }

    .btn-accept {
      background:linear-gradient(135deg,#27ae60,#2ecc71);
      color:#fff;
    }

    .btn-accept:hover:not(:disabled) {
      transform:translateY(-2px);
      box-shadow:0 4px 12px rgba(46,204,113,0.3);
    }

    .btn-reject {
      background:linear-gradient(135deg,#e74c3c,#c0392b);
      color:#fff;
    }

    .btn-reject:hover {
      transform:translateY(-2px);
      box-shadow:0 4px 12px rgba(231,76,60,0.3);
    }

    .btn-details {
      background:#1A3A7A;
      color:#fff;
    }

    .btn-details:hover {
      transform:translateY(-2px);
    }

    .btn-action:disabled {
      opacity:0.5;
      cursor:not-allowed;
    }

    .empty-state {
      text-align:center;
      padding:40px 20px;
      color:#777;
    }

    .empty-state-icon {
      font-size:48px;
      margin-bottom:12px;
      opacity:0.5;
    }
  </style>
</head>

<body>

<div class="mobile-header">
  <span class="mobile-menu-btn" onclick="openMenu()">â˜°</span>
  <span>Smart Bed System</span>
</div>

<div id="mobileMenu" class="mobile-menu">
  <div class="mobile-menu-close" onclick="closeMenu()">Ã—</div>
  <a href="main_dashboard.html" onclick="closeMenu()">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="smart_beds.html" onclick="closeMenu()">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø£Ø³Ø±Ø©</a>
  <a href="control_panel.html" onclick="closeMenu()">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
  <a href="network_transfer.html" onclick="closeMenu()">Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª</a>
  <a href="transfer_requests.html" onclick="closeMenu()">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>
  <a href="#" onclick="closeMenu()">ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø¬ / Ø±Ù…Ø¶Ø§Ù†</a>
  <a href="#" onclick="closeMenu()">Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</a>
  <a href="#" onclick="closeMenu()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</a>
</div>

<header>
  <div class="header-title">Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª</div>
  <div class="header-actions">
    <a href="main_dashboard.html" class="nav-link">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="smart_beds.html" class="nav-link">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø£Ø³Ø±Ø©</a>
    <a href="control_panel.html" class="nav-link">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
    <a href="network_transfer.html" class="nav-link">Ø´Ø¨ÙƒØ© Ø§Ù„Ù†Ù‚Ù„</a>
  </div>
</header>

<div class="container">
  <!-- Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ§Ø±Ø¯Ø© -->
  <div class="card incoming-card">
    <div class="card-title">Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ§Ø±Ø¯Ø© Ù…Ù† Ù…Ø³ØªØ´ÙÙŠØ§Øª Ø£Ø®Ø±Ù‰</div>
    <div id="incomingRequestsList"></div>
  </div>

  <!-- Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµØ§Ø¯Ø±Ø© -->
  <div class="card outgoing-card">
    <div class="card-title">Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµØ§Ø¯Ø±Ø©</div>
    <div id="outgoingRequestsList"></div>
  </div>
</div>

<script>
/* ============================================================
  Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆØ§Ø±Ø¯Ø©
============================================================ */
const incomingRequests = [
  {
    id: "REQ001",
    fromHospital: "Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù†ÙˆØ± Ø§Ù„ØªØ®ØµØµÙŠ",
    patientName: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
    severity: "HIGH",
    reason: "ÙØ´Ù„ ØªÙ†ÙØ³ÙŠ ÙŠØ­ØªØ§Ø¬ Ø³Ø±ÙŠØ± Ø¹Ø²Ù„",
    timeRemaining: 15,
    needsIsolation: true
  },
  {
    id: "REQ002",
    fromHospital: "Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ùƒ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø·Ø¨ÙŠØ©",
    patientName: "ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ",
    severity: "MEDIUM",
    reason: "Ø­Ø§Ø¬Ø© Ù„Ø±Ø¹Ø§ÙŠØ© Ù…ØªØ®ØµØµØ© ÙÙŠ Ø§Ù„Ù‚Ù„Ø¨",
    timeRemaining: 30,
    needsIsolation: false
  }
];

/* ============================================================
  Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµØ§Ø¯Ø±Ø©
============================================================ */
const outgoingRequests = [
  {
    id: "OUT001",
    toHospital: "Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù†ÙˆØ± Ø§Ù„ØªØ®ØµØµÙŠ",
    patientName: "Ø³Ø¹Ø§Ø¯ Ø£Ø­Ù…Ø¯",
    severity: "MEDIUM",
    reason: "Ø­Ø§Ø¬Ø© Ù„Ø±Ø¹Ø§ÙŠØ© Ù…ØªØ®ØµØµØ©",
    status: "pending",
    sentAt: "Ù…Ù†Ø° 10 Ø¯Ù‚Ø§Ø¦Ù‚"
  },
  {
    id: "OUT002",
    toHospital: "Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ùƒ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø·Ø¨ÙŠØ©",
    patientName: "ÙˆÙØ§Ø¡ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ",
    severity: "HIGH",
    reason: "Ø­Ø§Ù„Ø© Ø­Ø±Ø¬Ø© ØªØ­ØªØ§Ø¬ Ø¹Ù†Ø§ÙŠØ© Ù…ÙƒØ«ÙØ©",
    status: "accepted",
    sentAt: "Ù…Ù†Ø° 25 Ø¯Ù‚ÙŠÙ‚Ø©"
  }
];

function buildIncomingRequests() {
  const container = document.getElementById("incomingRequestsList");
  container.innerHTML = "";

  if (incomingRequests.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <div class="empty-state-icon">ğŸ“­</div>
        <div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ø±Ø¯Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</div>
      </div>
    `;
    return;
  }

  incomingRequests.forEach(req => {
    const card = document.createElement("div");
    card.className = "request-card";
    
    const aiDecision = checkAIAcceptance(req);
    
    card.innerHTML = `
      <div class="request-header">
        <div>
          <div class="request-title">Ø·Ù„Ø¨ Ù…Ù†: ${req.fromHospital}</div>
          <div class="request-meta">Ø§Ù„Ù…Ø±ÙŠØ¶: ${req.patientName}</div>
        </div>
        <div class="severity-badge severity-${req.severity.toLowerCase()}">
          ${req.severity === 'HIGH' ? 'Ø­Ø±Ø¬Ø©' : req.severity === 'MEDIUM' ? 'Ù…ØªÙˆØ³Ø·Ø©' : 'Ù…Ù†Ø®ÙØ¶Ø©'}
        </div>
      </div>
      <div style="font-size:13px; color:#555; margin-bottom:12px;">
        <strong>Ø³Ø¨Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„:</strong> ${req.reason}
      </div>
      <div style="font-size:12px; color:#999; margin-bottom:12px;">
        Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ø±Ø¯: <strong>${req.timeRemaining} Ø¯Ù‚ÙŠÙ‚Ø©</strong>
      </div>
      <div class="ai-recommendation">
        <div class="ai-recommendation-title">ØªÙˆØµÙŠØ© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:</div>
        <div class="ai-recommendation-text">
          ${aiDecision.message}
        </div>
      </div>
      <div class="request-actions">
        <button class="btn-action btn-accept" onclick="acceptRequest('${req.id}')" 
                ${!aiDecision.canAccept ? 'disabled' : ''}>
          Ù‚Ø¨ÙˆÙ„
        </button>
        <button class="btn-action btn-reject" onclick="rejectRequest('${req.id}')">
          Ø±ÙØ¶
        </button>
        <button class="btn-action btn-details" onclick="viewPatientDetails('${req.id}')">
          Ø§Ù„ØªÙØ§ØµÙŠÙ„
        </button>
      </div>
    `;
    
    container.appendChild(card);
  });
}

function buildOutgoingRequests() {
  const container = document.getElementById("outgoingRequestsList");
  container.innerHTML = "";

  if (outgoingRequests.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <div class="empty-state-icon">ğŸ“¤</div>
        <div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª ØµØ§Ø¯Ø±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</div>
      </div>
    `;
    return;
  }

  outgoingRequests.forEach(req => {
    const card = document.createElement("div");
    card.className = "request-card";
    
    const statusBadge = req.status === "accepted" 
      ? '<span style="color:#27ae60; font-weight:600;">âœ“ Ù…Ù‚Ø¨ÙˆÙ„</span>'
      : req.status === "rejected"
      ? '<span style="color:#e74c3c; font-weight:600;">âœ— Ù…Ø±ÙÙˆØ¶</span>'
      : '<span style="color:#f39c12; font-weight:600;">â³ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span>';
    
    card.innerHTML = `
      <div class="request-header">
        <div>
          <div class="request-title">Ø·Ù„Ø¨ Ø¥Ù„Ù‰: ${req.toHospital}</div>
          <div class="request-meta">Ø§Ù„Ù…Ø±ÙŠØ¶: ${req.patientName} â€¢ ${req.sentAt}</div>
        </div>
        <div class="severity-badge severity-${req.severity.toLowerCase()}">
          ${req.severity === 'HIGH' ? 'Ø­Ø±Ø¬Ø©' : req.severity === 'MEDIUM' ? 'Ù…ØªÙˆØ³Ø·Ø©' : 'Ù…Ù†Ø®ÙØ¶Ø©'}
        </div>
      </div>
      <div style="font-size:13px; color:#555; margin-bottom:12px;">
        <strong>Ø³Ø¨Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„:</strong> ${req.reason}
      </div>
      <div style="font-size:13px; color:#0a56b3; margin-bottom:12px; font-weight:600;">
        Ø§Ù„Ø­Ø§Ù„Ø©: ${statusBadge}
      </div>
      <div class="request-actions">
        <button class="btn-action btn-details" onclick="viewOutgoingDetails('${req.id}')" style="flex:1;">
          Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
        </button>
        ${req.status === "pending" ? `
          <button class="btn-action btn-reject" onclick="cancelRequest('${req.id}')" style="flex:1;">
            Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨
          </button>
        ` : ''}
      </div>
    `;
    
    container.appendChild(card);
  });
}

function checkAIAcceptance(request) {
  // Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù†Ø·Ù‚ AI Ù„Ù„Ù‚Ø¨ÙˆÙ„/Ø§Ù„Ø±ÙØ¶
  const currentLoad = 86; // Ø§Ù„Ø¶ØºØ· Ø§Ù„Ø­Ø§Ù„ÙŠ
  const currentRatio = 6.4; // Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ¶
  const hasIsolationBed = request.needsIsolation ? true : true; // Ù…Ø­Ø§ÙƒØ§Ø©
  
  // Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  if (request.severity === "HIGH" || request.severity === "CRITICAL") {
    return {
      canAccept: true,
      message: "âœ” ÙŠØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ â€” Ø§Ù„Ø­Ø§Ù„Ø© Ø­Ø±Ø¬Ø© ÙˆØªØªØ·Ù„Ø¨ Ù‚Ø¨ÙˆÙ„ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ"
    };
  }
  
  if (currentLoad > 80) {
    return {
      canAccept: false,
      message: "âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ â€” Ø§Ù„Ø¶ØºØ· Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ø±ØªÙØ¹ Ø¬Ø¯Ø§Ù‹ (" + currentLoad + "%)"
    };
  }
  
  if (currentRatio >= 7) {
    return {
      canAccept: false,
      message: "âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ â€” Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ù…Ø±ØªÙØ¹Ø© Ø¬Ø¯Ø§Ù‹ (1:" + currentRatio + ")"
    };
  }
  
  if (request.needsIsolation && !hasIsolationBed) {
    return {
      canAccept: false,
      message: "âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ â€” Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø±ÙŠØ± Ø¹Ø²Ù„ Ù…ØªØ§Ø­"
    };
  }
  
  if (currentLoad <= 70 && currentRatio <= 6) {
    return {
      canAccept: true,
      message: "âœ” ÙŠØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ â€” Ø§Ù„Ø³Ø¹Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØªØ³Ù…Ø­ Ø¨Ø°Ù„Ùƒ. Ø§Ù„Ø¬Ù†Ø§Ø­ 4B Ù„Ø¯ÙŠÙ‡ Ø³Ø±ÙŠØ± Ù…Ù†Ø§Ø³Ø¨ Ù…ØªØ§Ø­."
    };
  }
  
  return {
    canAccept: true,
    message: "âš  ÙŠÙ…ÙƒÙ† Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ â€” Ù„ÙƒÙ† Ø§Ù„Ø¶ØºØ· Ù…ØªÙˆØ³Ø·. ÙŠÙÙ†ØµØ­ Ø¨Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©."
  };
}

function acceptRequest(requestId) {
  const req = incomingRequests.find(r => r.id === requestId);
  if (req) {
    alert(`ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† ${req.fromHospital}\nØ§Ù„Ù…Ø±ÙŠØ¶: ${req.patientName}`);
    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    const index = incomingRequests.findIndex(r => r.id === requestId);
    if (index > -1) {
      incomingRequests.splice(index, 1);
      buildIncomingRequests();
    }
  }
}

function rejectRequest(requestId) {
  const req = incomingRequests.find(r => r.id === requestId);
  if (req) {
    if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† ${req.fromHospital}ØŸ`)) {
      alert(`ØªÙ… Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„`);
      const index = incomingRequests.findIndex(r => r.id === requestId);
      if (index > -1) {
        incomingRequests.splice(index, 1);
        buildIncomingRequests();
      }
    }
  }
}

function viewPatientDetails(requestId) {
  const req = incomingRequests.find(r => r.id === requestId);
  if (req) {
    alert(`ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø±ÙŠØ¶:\n\nØ§Ù„Ø§Ø³Ù…: ${req.patientName}\nØ§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù…Ø±Ø³Ù„: ${req.fromHospital}\nØ¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø§Ù„Ø©: ${req.severity}\nØ³Ø¨Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„: ${req.reason}\n\n(Ø³ÙŠØªÙ… ÙØªØ­ Ù…Ù„Ù Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙƒØ§Ù…Ù„)`);
  }
}

function viewOutgoingDetails(requestId) {
  const req = outgoingRequests.find(r => r.id === requestId);
  if (req) {
    alert(`ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„ØµØ§Ø¯Ø±:\n\nØ§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„: ${req.toHospital}\nØ§Ù„Ù…Ø±ÙŠØ¶: ${req.patientName}\nØ¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø§Ù„Ø©: ${req.severity}\nØ³Ø¨Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„: ${req.reason}\nØ§Ù„Ø­Ø§Ù„Ø©: ${req.status === 'accepted' ? 'Ù…Ù‚Ø¨ÙˆÙ„' : req.status === 'rejected' ? 'Ù…Ø±ÙÙˆØ¶' : 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±'}\n\n(Ø³ÙŠØªÙ… ÙØªØ­ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…Ù„Ø©)`);
  }
}

function cancelRequest(requestId) {
  const req = outgoingRequests.find(r => r.id === requestId);
  if (req) {
    if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ${req.toHospital}ØŸ`)) {
      alert(`ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø·Ù„Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„`);
      const index = outgoingRequests.findIndex(r => r.id === requestId);
      if (index > -1) {
        outgoingRequests.splice(index, 1);
        buildOutgoingRequests();
      }
    }
  }
}

/* ============================================================
  ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
============================================================ */
buildIncomingRequests();
buildOutgoingRequests();
</script>

<script>
  function openMenu() {
    const menu = document.getElementById('mobileMenu');
    if (menu) {
      menu.style.display = 'block';
    }
  }

  function closeMenu() {
    const menu = document.getElementById('mobileMenu');
    if (menu) {
      menu.style.display = 'none';
    }
  }
</script>

</body>
</html>

