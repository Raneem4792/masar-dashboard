<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Main Dashboard – Smart Bed System</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">

<style>
* {margin:0; padding:0; box-sizing:border-box;}
body {
  font-family:"Tajawal", sans-serif;
  background:#F7F9FD;
  color:#1A3A7A;
  min-height: 100vh;
}

/* Header */
header {
  background:#0A1D41;
  padding:22px 30px;
  color:#FFFFFF;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 4px 16px rgba(0,0,0,0.25);
  letter-spacing: 0.5px;
}
@media (max-width: 600px) {
  header {
    flex-direction: column;
    gap: 12px;
    text-align: center;
  }

  .nav-btn {
    width: 100%;
    justify-content: center;
  }
}

.mobile-header {
  display: none;
  background: #0A1D41;
  color: #ffffff;
  padding: 14px 20px;
  font-size: 18px;
  font-weight: 700;
  align-items: center;
  justify-content: space-between;
}

.mobile-menu-btn {
  font-size: 26px;
  cursor: pointer;
}

.mobile-menu {
  display: none;
  position: fixed;
  inset-inline-start: 0;
  top: 0;
  height: 100vh;
  width: 260px;
  background: #0A1D41;
  padding: 20px;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
  z-index: 9999;
  overflow-y: auto;
}

.mobile-menu a {
  display: block;
  color: #ffffff;
  padding: 14px 0;
  font-size: 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  text-decoration: none;
}

.mobile-menu-close {
  color: #ffffff;
  font-size: 26px;
  text-align: end;
  cursor: pointer;
  margin-bottom: 20px;
}

@media (max-width: 768px) {
  header,
  .top-buttons {
    display: none !important;
  }

  .mobile-header {
    display: flex !important;
  }
}
.logo {font-size:22px; font-weight:700; color:#FFFFFF; letter-spacing: 0.5px;}
.nav-btn {
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.25);
  padding: 9px 18px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.12);
  color: #fff;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  text-decoration: none;
  backdrop-filter: blur(8px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}
.nav-btn:hover {
  background: rgba(255, 255, 255, 0.25);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  border-color: rgba(255, 255, 255, 0.4);
}
.nav-btn:active {
  transform: translateY(0);
}

.tag-season {
  font-size: 13px;
  font-weight: 600;
  padding: 8px 16px;
  border-radius: 12px;
  border: 1px solid rgba(10, 29, 65, 0.2);
  background: linear-gradient(135deg, rgba(3, 169, 244, 0.1), rgba(3, 169, 244, 0.05));
  display: inline-flex;
  align-items: center;
  gap: 6px;
  color: #1A3A7A;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.season-toggle {
  border-radius: 14px;
  border: 2px solid rgba(10, 29, 65, 0.3);
  padding: 10px 20px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  background: rgba(10, 29, 65, 0.08);
  color: #1A3A7A;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  text-decoration: none;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.season-toggle.active {
  background: linear-gradient(135deg, #ffb300, #ffa000);
  color: #000;
  border-color: #ffb300;
  box-shadow: 0 4px 16px rgba(255, 179, 0, 0.4);
  font-weight: 700;
}

.season-toggle:hover {
  background: rgba(10, 29, 65, 0.15);
  transform: translateY(-2px);
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.15);
  border-color: rgba(10, 29, 65, 0.4);
}

.season-toggle.active:hover {
  background: linear-gradient(135deg, #ffc107, #ffb300);
  box-shadow: 0 6px 20px rgba(255, 179, 0, 0.5);
}

/* Season Mode Card */
.season-mode-card {
  background: linear-gradient(180deg, #ffffff, #f7f9fc);
  padding: 24px;
  border-radius: 20px;
  border: 1px solid rgba(195, 199, 115, 0.5);
  box-shadow: 0 6px 20px rgba(10, 29, 65, 0.08);
  margin-top: 30px;
  margin-bottom: 20px;
  transition: 0.3s;
}

.season-mode-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 28px rgba(10, 29, 65, 0.12);
}

.season-mode-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 16px;
}

.season-mode-info {
  display: flex;
  align-items: center;
  gap: 16px;
  flex: 1;
  flex-wrap: wrap;
}

.season-mode-text {
  font-size: 14px;
  color: #1A3A7A;
  font-weight: 500;
}

@media (max-width: 768px) {
  .season-mode-content {
    flex-direction: column;
    align-items: stretch;
  }
  
  .season-mode-info {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }
  
  .season-toggle {
    width: 100%;
    justify-content: center;
  }
}

/* Container */
.container {
  max-width:1400px;
  margin:30px auto;
  padding:0 20px;
}

/* Hero Section */
.hero {
  background:linear-gradient(180deg, #ffffff, #f7f9fc);
  padding:40px;
  border-radius:24px;
  box-shadow:0 6px 20px rgba(10, 29, 65, 0.08);
  text-align:center;
  margin-bottom:30px;
}
.hero-title {
  font-size:48px;
  font-weight:700;
  margin-bottom:12px;
  color:#A8AD63;
  letter-spacing: 2px;
}
.hero-sub {font-size:16px; color:#1A3A7A; margin-bottom:20px;}
.hero-btns {
  margin-top:20px;
  display:flex;
  justify-content:center;
  gap:14px;
  flex-wrap: wrap;
}
.big-btn {
  padding:14px 26px;
  border:none;
  border-radius:14px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  color:white;
  transition:.2s;
  text-decoration: none;
  display: inline-block;
}
.btn-blue {background:#0A1D41;}
.btn-green {background:#C3C773; color:#0A1D41;}
.btn-purple {background:#1A3A7A;}
.big-btn:hover {transform:translateY(-3px); box-shadow:0 6px 20px rgba(0,0,0,0.2);}

/* Modules Grid */
.modules {
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:20px;
  margin-top:30px;
}
.module-card {
  background:linear-gradient(180deg, #ffffff, #f7f9fc);
  padding:24px;
  border-radius:20px;
  border:1px solid rgba(195, 199, 115, 0.5);
  box-shadow:0 6px 20px rgba(10, 29, 65, 0.08);
  transition:.3s;
}
.module-card:hover {
  transform:translateY(-4px);
  box-shadow:0 14px 32px rgba(15,37,85,0.15);
}
.module-title {font-size:18px; font-weight:700; margin-bottom:6px; color:#A8AD63;}
.module-desc {font-size:13px; color:#15294E; margin-bottom:12px; line-height:1.6;}
.module-link {
  display:inline-block;
  padding:8px 18px;
  background:#0A1D41;
  color:#FFFFFF;
  border-radius:14px;
  font-size:13px;
  text-decoration:none;
  transition:.2s;
  box-shadow: 0 4px 12px rgba(10, 29, 65, 0.2);
}
.module-link:hover {background:#8A8F40; transform:translateY(-1px); box-shadow: 0 6px 16px rgba(10, 29, 65, 0.3);}

/* KPIs */
.kpi-grid {
  margin-top:40px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:18px;
}
.kpi {
  padding:18px;
  background:linear-gradient(180deg, #ffffff, #f7f9fc);
  border-radius:18px;
  border:1px solid rgba(10, 29, 65, 0.08);
  text-align:center;
  box-shadow:0 6px 20px rgba(10, 29, 65, 0.06);
  transition:.2s;
}
.kpi:hover {
  transform:translateY(-2px);
  box-shadow:0 12px 28px rgba(10, 29, 65, 0.12);
}
.kpi-title {
  font-size:13px;
  color:#15294E;
  margin-bottom:6px;
  font-weight:500;
}
.kpi-value {
  font-size:28px;
  font-weight:700;
  color:#0A1D41;
}

/* AI Box Pro */
.ai-box-pro {
  margin-top: 40px;
  background: linear-gradient(180deg, #ffffff, #f7f9fc);
  border: 1px solid rgba(195, 199, 115, 0.4);
  padding: 26px;
  border-radius: 22px;
  box-shadow: 0 6px 20px rgba(10, 29, 65, 0.08);
}

.ai-pro-header {
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 20px;
  color: #A8AD63;
  display: flex;
  align-items: center;
  gap: 8px;
}

.ai-pro-section {
  background: linear-gradient(180deg, #ffffff, #f7f9fc);
  padding: 18px;
  border-radius: 16px;
  border: 1px solid rgba(195, 199, 115, 0.5);
  margin-bottom: 16px;
  box-shadow: 0 2px 8px rgba(10, 29, 65, 0.08);
}

.ai-pro-section:last-of-type {
  margin-bottom: 0;
}

.ai-pro-title {
  font-size: 15px;
  font-weight: 700;
  margin-bottom: 12px;
  color: #1A3A7A;
  display: flex;
  align-items: center;
  gap: 6px;
}

.ai-pro-highlight {
  padding: 10px 14px;
  border-radius: 12px;
  font-size: 14px;
  margin-bottom: 10px;
  font-weight: 600;
}

.ai-pro-highlight.danger {
  background: rgba(231, 76, 60, 0.12);
  color: #c0392b;
  border: 1px solid rgba(231, 76, 60, 0.2);
}

.ai-pro-highlight.warning {
  background: rgba(241, 196, 15, 0.15);
  color: #f39c12;
  border: 1px solid rgba(241, 196, 15, 0.25);
}

.ai-pro-highlight.success {
  background: rgba(46, 204, 113, 0.12);
  color: #27ae60;
  border: 1px solid rgba(46, 204, 113, 0.2);
}

.ai-pro-text {
  font-size: 13px;
  color: #1A3A7A;
  line-height: 1.8;
  margin-top: 8px;
}

.ai-pro-text strong {
  color: #8A8F40;
  font-weight: 600;
}

.ai-pro-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.ai-pro-list li {
  margin-bottom: 8px;
  font-size: 13px;
  color: #444;
  padding-right: 20px;
  position: relative;
  line-height: 1.6;
}

.ai-pro-list li::before {
  content: "•";
  position: absolute;
  right: 0;
  color: #0a56b3;
  font-weight: 700;
  font-size: 16px;
}

.ai-pro-list li strong {
  color: #0a56b3;
  font-weight: 600;
}

.ai-pro-hospital-box {
  background: linear-gradient(180deg, #ffffff, #f7f9fc);
  border: 1px solid rgba(195, 199, 115, 0.5);
  padding: 14px;
  border-radius: 16px;
  margin-bottom: 12px;
}

.ai-pro-hospital-name {
  font-size: 15px;
  font-weight: 700;
  margin-bottom: 10px;
  color: #1A3A7A;
}

.ai-pro-hospital-data {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
}

.ai-pro-hospital-data span {
  display: block;
  font-size: 13px;
  color: #1A3A7A;
  margin-bottom: 4px;
}

.ai-pro-hospital-data strong {
  color: #8A8F40;
  font-weight: 600;
}

.ai-pro-final {
  background: linear-gradient(180deg, #ffffff, #f7f9fc);
  padding: 16px;
  border-radius: 16px;
  font-size: 14px;
  color: #1A3A7A;
  border: 1px solid rgba(195, 199, 115, 0.5);
  line-height: 1.7;
  margin-top: 16px;
}

.ai-pro-final strong {
  color: #A8AD63;
  font-weight: 700;
}

@media (max-width: 1200px) {
  .modules {grid-template-columns: repeat(2, minmax(0,1fr));}
}

@media (max-width: 768px) {
  .ai-pro-hospital-data {
    grid-template-columns: 1fr;
  }
}

footer {
  text-align:center;
  padding:20px;
  color:#888;
  font-size:12px;
  margin-top:40px;
}

@media (max-width: 768px) {
  .hero-title {font-size:36px;}
  .hero-sub {font-size:14px;}
  .hero-btns {flex-direction: column;}
  .big-btn {width: 100%;}
  .modules {grid-template-columns: 1fr;}
  .kpi-grid {grid-template-columns: repeat(2, 1fr);}
}
</style>
</head>

<body>

<div class="mobile-header">
  <span class="mobile-menu-btn" onclick="openMenu()">☰</span>
  <span>Masar</span>
</div>

<div id="mobileMenu" class="mobile-menu">
  <div class="mobile-menu-close" onclick="closeMenu()">×</div>
  <a href="main_dashboard.html">الرئيسية</a>
  <a href="smart_beds.html">خريطة الأسرة</a>
  <a href="control_panel.html">لوحة التحكم</a>
  <a href="transfer_requests.html">إدارة الطلبات</a>
</div>

<header>
  <div class="logo">Masar – Smart Bed System</div>
  <a href="smart_beds.html" class="nav-btn">الدخول للنظام</a>
</header>

<!-- Season Banner -->
<div id="seasonBanner" style="
  display:none;
  background:#fff3cd;
  padding:14px 20px;
  color:#664d03;
  border:1px solid #ffeeba;
  border-radius:12px;
  margin:12px 18px;
  font-size:14px;
  box-shadow:0 2px 6px rgba(0,0,0,0.06);
">
  <strong>وضع موسم الحج مفعّل:</strong> تم رفع حساسية التحليل، وخفض حدود الضغط، وإعطاء أولوية لاستقبال الحالات الحرجة وتحويل الحالات المستقرة.
</div>

<div class="container">

  <!-- Hero -->
  <div class="hero">
    <div class="hero-title">Masar</div>
    <div class="hero-sub">SMART BED & RESOURCE MANAGEMENT SYSTEM<br>نظام إدارة الأسرة والموارد التمريضية الذكي – مستشفى الملك عبدالعزيز</div>
  </div>

  <!-- Modules -->
  <div class="modules">
    <div class="module-card">
      <div class="module-title"> خريطة الأسرة التفاعلية</div>
      <div class="module-desc">عرض لحظي لحالة كل سرير في الجناح – متاح، مشغول، عزل، قريب الخروج.</div>
      <a href="smart_beds.html" class="module-link">دخول الصفحة</a>
    </div>

    <div class="module-card">
      <div class="module-title"> لوحة التحكم – Head Nurse Dashboard</div>
      <div class="module-desc">سعة الأسرة، نسبة التمريض، الضغط، الأجهزة، توصيات الذكاء الاصطناعي.</div>
      <a href="control_panel.html" class="module-link">عرض اللوحة</a>
    </div>

    <div class="module-card">
      <div class="module-title"> إدارة طلبات التحويل</div>
      <div class="module-desc">إرسال طلبات تحويل، استقبال الطلبات الواردة، ولوحة AI للقبول/الرفض.</div>
      <a href="transfer_requests.html" class="module-link">إدارة الطلبات</a>
    </div>
  </div>

  <!-- KPIs -->
  <div class="kpi-grid">
    <div class="kpi">
      <div class="kpi-title">إجمالي الأسرة</div>
      <div class="kpi-value">240</div>
    </div>
    <div class="kpi">
      <div class="kpi-title">الأسرة المتاحة</div>
      <div class="kpi-value" style="color:#2e7d32;">35</div>
    </div>
    <div class="kpi">
      <div class="kpi-title">الأسرة المشغولة</div>
      <div class="kpi-value" style="color:#d32f2f;">205</div>
    </div>
    <div class="kpi">
      <div class="kpi-title">حالات العزل</div>
      <div class="kpi-value" style="color:#6a1b9a;">12</div>
    </div>
    <div class="kpi">
      <div class="kpi-title">نسبة تمريض/مرضى</div>
      <div class="kpi-value">1 : 6.4</div>
    </div>
    <div class="kpi">
      <div class="kpi-title">الضغط العام</div>
      <div class="kpi-value" style="font-size:20px;">مرتفع</div>
    </div>
  </div>

  <!-- Season Mode Card -->
  <div class="season-mode-card">
    <div class="season-mode-content">
      <div class="season-mode-info">
        <span class="tag-season">
          وضع المواسم
          <span id="seasonLabel">عادي</span>
        </span>
        <span class="season-mode-text">إدارة وضع الحج والرمضان للنظام</span>
      </div>
      <button id="seasonToggle" class="season-toggle" type="button">
        تفعيل وضع الحج / رمضان
      </button>
    </div>
  </div>

  <!-- AI Summary Pro -->
  <div class="ai-box-pro">
    <div class="ai-pro-header">
       تحليل الذكاء الاصطناعي – ملخص الوضع الحالي
    </div>

    <!-- Section 1: Pressure -->
    <div class="ai-pro-section">
      <div class="ai-pro-title"> تحليل الضغط العام</div>
      <div class="ai-pro-highlight danger">
        الضغط الكلي للمستشفى: <strong>86%</strong> – مرتفع جدًا 
      </div>
      <p class="ai-pro-text">
        جناح 4B يعمل فوق طاقته التشغيلية، ومن المتوقع زيادة الضغط خلال <strong>45 دقيقة</strong>.
      </p>
    </div>

    <!-- Section 2: Recommendations -->
    <div class="ai-pro-section">
      <div class="ai-pro-title"> توصيات فورية</div>
      <ul class="ai-pro-list">
        <li>نقل <strong>3 حالات</strong> من جناح 4B لتخفيف الازدحام.</li>
        <li>توزيع التمريض بشكل أفضل في الأجنحة المجاورة.</li>
        <li>مراقبة الحالات الحرجة خلال الساعتين القادمتين.</li>
      </ul>
    </div>

    <!-- Section 3: Best Transfer Hospital -->
    <div class="ai-pro-section">
      <div class="ai-pro-title"> أفضل مستشفى لاستقبال التحويل</div>
      <div class="ai-pro-hospital-box">
        <div class="ai-pro-hospital-name">مستشفى النور التخصصي</div>
        <div class="ai-pro-hospital-data">
          <span>الضغط: <strong>44%</strong></span>
          <span>نسبة التمريض: <strong>1:4.5</strong></span>
          <span>الأسرة المتاحة: <strong>12</strong></span>
          <span>العناية الحرجة المتاحة: <strong>2</strong></span>
        </div>
      </div>
      <p class="ai-pro-text">
        يوصى بالتحويل إلى مستشفى النور بسبب انخفاض الضغط وتحسن نسبة التمريض مقارنة بالمستشفى الحالي.
      </p>
    </div>

    <!-- Section 4: Final Summary -->
    <div class="ai-pro-final">
      <strong>الخلاصة:</strong> الوضع الحالي غير مستقر وقد يتطلب تحويلات إضافية خلال الساعات القادمة. ينصح بالتحويل إلى مستشفى النور كخيار أول.
    </div>
  </div>

</div>

<footer>
  نظام إدارة الأسرة – 2025 © تطوير: مهندسة رنيم
</footer>

<script>
  function openMenu() {
    const menu = document.getElementById('mobileMenu');
    if (menu) {
      menu.style.display = 'block';
    }
  }

  function closeMenu() {
    const menu = document.getElementById('mobileMenu');
    if (menu) {
      menu.style.display = 'none';
    }
  }

  // وضع رمضان/الحج
  let seasonMode = false;
  const seasonToggle = document.getElementById('seasonToggle');
  const seasonLabel = document.getElementById('seasonLabel');
  const seasonBanner = document.getElementById('seasonBanner');

  // تحميل الحالة من localStorage
  function loadSeasonMode() {
    const saved = localStorage.getItem('seasonMode');
    if (saved === 'true') {
      seasonMode = true;
      if (seasonToggle) seasonToggle.classList.add('active');
      if (seasonLabel) seasonLabel.textContent = 'حج / رمضان';
      if (seasonBanner) seasonBanner.style.display = 'block';
    }
  }

  // حفظ الحالة في localStorage
  function saveSeasonMode() {
    localStorage.setItem('seasonMode', seasonMode.toString());
  }

  function initSeasonToggle() {
    if (seasonToggle && seasonLabel) {
      loadSeasonMode();
      
      seasonToggle.addEventListener('click', () => {
        seasonMode = !seasonMode;
        seasonToggle.classList.toggle('active', seasonMode);
        seasonLabel.textContent = seasonMode ? 'حج / رمضان' : 'عادي';
        
        if (seasonBanner) {
          seasonBanner.style.display = seasonMode ? 'block' : 'none';
        }
        
        saveSeasonMode();
        
        if (seasonMode) {
          console.log('تم تفعيل وضع الحج / رمضان');
        } else {
          console.log('تم إلغاء تفعيل وضع الحج / رمضان');
        }
      });
    }
  }

  // تهيئة وضع رمضان عند تحميل الصفحة
  document.addEventListener('DOMContentLoaded', () => {
    initSeasonToggle();
  });
</script>

</body>
</html>
